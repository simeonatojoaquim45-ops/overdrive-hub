--[[
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘           â˜… The StarEzic Hub â˜… - Parte 1                      â•‘
    â•‘           Flee The Facility - Ultimate Script                 â•‘
    â•‘           Sistema de GUI e Key                                â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]]

--// Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local CoreGui = game:GetService("CoreGui")
local TeleportService = game:GetService("TeleportService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()

--// CONFIGURAÃ‡Ã•ES
local CONFIG = {
    Developer = "LariizzyEzc",
    ScriptName = "The StarEzic Hub",
    Version = "1.0.0",
    Colors = {
        Primary = Color3.fromRGB(0, 255, 136),
        Secondary = Color3.fromRGB(0, 170, 255),
        Premium = Color3.fromRGB(255, 0, 255),
        Dev = Color3.fromRGB(255, 215, 0),
        Background = Color3.fromRGB(15, 15, 26),
        Glass = Color3.fromRGB(20, 20, 35)
    }
}

--// SISTEMA DE KEY
_G.KeySystem = {
    ActiveKeys = {},
    PremiumUsers = {},
    BannedUsers = {},
    UserAccess = {}
}

--// FUNÃ‡Ã•ES UTILITÃRIAS
function GetUserRank()
    local nick = LocalPlayer.Name
    if nick == CONFIG.Developer then return "DEVELOPER" end
    if table.find(_G.KeySystem.BannedUsers, nick) then return "BANNED" end
    if table.find(_G.KeySystem.PremiumUsers, nick) then return "PREMIUM" end
    if _G.KeySystem.UserAccess[nick] then return _G.KeySystem.UserAccess[nick].rank end
    return "NONE"
end

function GenerateKey(keyType, days)
    local chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"
    local key = "STAR-"
    for i = 1, 4 do
        for j = 1, 4 do
            local rand = math.random(1, #chars)
            key = key .. chars:sub(rand, rand)
        end
        if i < 4 then key = key .. "-" end
    end
    local expiration = tick() + (days * 86400)
    _G.KeySystem.ActiveKeys[key] = {type = keyType, expiration = expiration, used = false, usedBy = nil}
    return key
end

function CreateNotification(title, text, duration)
    local Notif = Instance.new("Frame")
    Notif.Parent = game.CoreGui:FindFirstChild("StarEzicHub") or Instance.new("ScreenGui", game.CoreGui)
    Notif.BackgroundColor3 = CONFIG.Colors.Background
    Notif.BackgroundTransparency = 0.1
    Notif.BorderSizePixel = 0
    Notif.Position = UDim2.new(1, 20, 0.8, 0)
    Notif.Size = UDim2.new(0, 320, 0, 90)
    
    local Corner = Instance.new("UICorner")
    Corner.CornerRadius = UDim.new(0, 12)
    Corner.Parent = Notif
    
    local Stroke = Instance.new("UIStroke")
    Stroke.Color = CONFIG.Colors.Primary
    Stroke.Thickness = 2
    Stroke.Parent = Notif
    
    local Title = Instance.new("TextLabel")
    Title.Parent = Notif
    Title.BackgroundTransparency = 1
    Title.Position = UDim2.new(0, 15, 0, 10)
    Title.Size = UDim2.new(1, -30, 0, 25)
    Title.Font = Enum.Font.GothamBold
    Title.Text = "â˜… " .. title
    Title.TextColor3 = CONFIG.Colors.Primary
    Title.TextSize = 16
    Title.TextXAlignment = Enum.TextXAlignment.Left
    
    local Message = Instance.new("TextLabel")
    Message.Parent = Notif
    Message.BackgroundTransparency = 1
    Message.Position = UDim2.new(0, 15, 0, 35)
    Message.Size = UDim2.new(1, -30, 0, 50)
    Message.Font = Enum.Font.Gotham
    Message.Text = text
    Message.TextColor3 = Color3.fromRGB(255, 255, 255)
    Message.TextSize = 13
    Message.TextWrapped = true
    Message.TextXAlignment = Enum.TextXAlignment.Left
    
    Notif:TweenPosition(UDim2.new(1, -340, 0.8, 0), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, 0.5, true)
    
    delay(duration, function()
        Notif:TweenPosition(UDim2.new(1, 20, 0.8, 0), Enum.EasingDirection.In, Enum.EasingStyle.Quart, 0.5, true)
        wait(0.5)
        Notif:Destroy()
    end)
end

--// CRIAR GUI PRINCIPAL
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "StarEzicHub"
ScreenGui.Parent = CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.ResetOnSpawn = false

--// MAIN FRAME
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = CONFIG.Colors.Background
MainFrame.BackgroundTransparency = 0.1
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0.5, -300, 0.5, -200)
MainFrame.Size = UDim2.new(0, 600, 0, 400)
MainFrame.Visible = false

local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 16)
MainCorner.Parent = MainFrame

local MainStroke = Instance.new("UIStroke")
MainStroke.Color = CONFIG.Colors.Primary
MainStroke.Thickness = 2
MainStroke.Parent = MainFrame

--// HEADER
local Header = Instance.new("Frame")
Header.Name = "Header"
Header.Parent = MainFrame
Header.BackgroundColor3 = CONFIG.Colors.Glass
Header.BackgroundTransparency = 0.3
Header.BorderSizePixel = 0
Header.Size = UDim2.new(1, 0, 0, 70)

local HeaderCorner = Instance.new("UICorner")
HeaderCorner.CornerRadius = UDim.new(0, 16)
HeaderCorner.Parent = Header

-- Avatar
local Avatar = Instance.new("ImageLabel")
Avatar.Parent = Header
Avatar.BackgroundColor3 = CONFIG.Colors.Glass
Avatar.BorderSizePixel = 0
Avatar.Position = UDim2.new(0, 15, 0.5, -25)
Avatar.Size = UDim2.new(0, 50, 0, 50)
Avatar.Image = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. LocalPlayer.UserId .. "&width=420&height=420&format=png"

local AvatarCorner = Instance.new("UICorner")
AvatarCorner.CornerRadius = UDim.new(1, 0)
AvatarCorner.Parent = Avatar

local AvatarStroke = Instance.new("UIStroke")
AvatarStroke.Color = CONFIG.Colors.Primary
AvatarStroke.Thickness = 2
AvatarStroke.Parent = Avatar

-- Nome
local NameLabel = Instance.new("TextLabel")
NameLabel.Parent = Header
NameLabel.BackgroundTransparency = 1
NameLabel.Position = UDim2.new(0, 80, 0, 12)
NameLabel.Size = UDim2.new(0, 200, 0, 25)
NameLabel.Font = Enum.Font.GothamBold
NameLabel.Text = LocalPlayer.Name
NameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
NameLabel.TextSize = 18
NameLabel.TextXAlignment = Enum.TextXAlignment.Left

-- Rank
_G.RankLabel = Instance.new("TextLabel")
_G.RankLabel.Parent = Header
_G.RankLabel.BackgroundTransparency = 1
_G.RankLabel.Position = UDim2.new(0, 80, 0, 37)
_G.RankLabel.Size = UDim2.new(0, 200, 0, 20)
_G.RankLabel.Font = Enum.Font.GothamBold
_G.RankLabel.Text = "LOADING..."
_G.RankLabel.TextColor3 = CONFIG.Colors.Primary
_G.RankLabel.TextSize = 13
_G.RankLabel.TextXAlignment = Enum.TextXAlignment.Left

-- FPS
local FPSFrame = Instance.new("Frame")
FPSFrame.Parent = Header
FPSFrame.BackgroundColor3 = CONFIG.Colors.Primary
FPSFrame.BackgroundTransparency = 0.85
FPSFrame.BorderSizePixel = 0
FPSFrame.Position = UDim2.new(1, -220, 0.5, -15)
FPSFrame.Size = UDim2.new(0, 90, 0, 30)

local FPSCorner = Instance.new("UICorner")
FPSCorner.CornerRadius = UDim.new(0, 8)
FPSCorner.Parent = FPSFrame

_G.FPSLabel = Instance.new("TextLabel")
_G.FPSLabel.Parent = FPSFrame
_G.FPSLabel.BackgroundTransparency = 1
_G.FPSLabel.Size = UDim2.new(1, 0, 1, 0)
_G.FPSLabel.Font = Enum.Font.GothamBold
_G.FPSLabel.Text = "FPS: 60"
_G.FPSLabel.TextColor3 = CONFIG.Colors.Primary
_G.FPSLabel.TextSize = 13

-- Ping
local PingFrame = Instance.new("Frame")
PingFrame.Parent = Header
PingFrame.BackgroundColor3 = CONFIG.Colors.Secondary
PingFrame.BackgroundTransparency = 0.85
PingFrame.BorderSizePixel = 0
PingFrame.Position = UDim2.new(1, -320, 0.5, -15)
PingFrame.Size = UDim2.new(0, 90, 0, 30)

local PingCorner = Instance.new("UICorner")
PingCorner.CornerRadius = UDim.new(0, 8)
PingCorner.Parent = PingFrame

_G.PingLabel = Instance.new("TextLabel")
_G.PingLabel.Parent = PingFrame
_G.PingLabel.BackgroundTransparency = 1
_G.PingLabel.Size = UDim2.new(1, 0, 1, 0)
_G.PingLabel.Font = Enum.Font.GothamBold
_G.PingLabel.Text = "Ping: 60ms"
_G.PingLabel.TextColor3 = CONFIG.Colors.Secondary
_G.PingLabel.TextSize = 13

-- BotÃµes controle
local CloseBtn = Instance.new("TextButton")
CloseBtn.Parent = Header
CloseBtn.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
CloseBtn.BackgroundTransparency = 0.3
CloseBtn.BorderSizePixel = 0
CloseBtn.Position = UDim2.new(1, -40, 0.5, -12)
CloseBtn.Size = UDim2.new(0, 26, 0, 26)
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.Text = "Ã—"
CloseBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseBtn.TextSize = 20

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 6)
CloseCorner.Parent = CloseBtn

local MinBtn = Instance.new("TextButton")
MinBtn.Parent = Header
MinBtn.BackgroundColor3 = Color3.fromRGB(255, 180, 0)
MinBtn.BackgroundTransparency = 0.3
MinBtn.BorderSizePixel = 0
MinBtn.Position = UDim2.new(1, -72, 0.5, -12)
MinBtn.Size = UDim2.new(0, 26, 0, 26)
MinBtn.Font = Enum.Font.GothamBold
MinBtn.Text = "âˆ’"
MinBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
MinBtn.TextSize = 20

local MinCorner = Instance.new("UICorner")
MinCorner.CornerRadius = UDim.new(0, 6)
MinCorner.Parent = MinBtn

--// SIDEBAR
local Sidebar = Instance.new("Frame")
Sidebar.Parent = MainFrame
Sidebar.BackgroundColor3 = CONFIG.Colors.Glass
Sidebar.BackgroundTransparency = 0.5
Sidebar.BorderSizePixel = 0
Sidebar.Position = UDim2.new(0, 0, 0, 70)
Sidebar.Size = UDim2.new(0, 140, 1, -70)

local SidebarCorner = Instance.new("UICorner")
SidebarCorner.CornerRadius = UDim.new(0, 16)
SidebarCorner.Parent = Sidebar

--// CONTENT AREA
_G.ContentArea = Instance.new("Frame")
_G.ContentArea.Parent = MainFrame
_G.ContentArea.BackgroundColor3 = CONFIG.Colors.Background
_G.ContentArea.BackgroundTransparency = 0.5
_G.ContentArea.BorderSizePixel = 0
_G.ContentArea.Position = UDim2.new(0, 145, 0, 75)
_G.ContentArea.Size = UDim2.new(1, -150, 1, -80)

--// TOGGLE BUTTON
_G.ToggleBtn = Instance.new("TextButton")
_G.ToggleBtn.Name = "ToggleBtn"
_G.ToggleBtn.Parent = ScreenGui
_G.ToggleBtn.BackgroundColor3 = CONFIG.Colors.Background
_G.ToggleBtn.BorderSizePixel = 0
_G.ToggleBtn.Position = UDim2.new(0, 20, 0.5, -30)
_G.ToggleBtn.Size = UDim2.new(0, 60, 0, 60)
_G.ToggleBtn.Font = Enum.Font.GothamBold
_G.ToggleBtn.Text = "â˜…\nSTAR\nEZIC"
_G.ToggleBtn.TextColor3 = CONFIG.Colors.Primary
_G.ToggleBtn.TextSize = 10
_G.ToggleBtn.Visible = false

local ToggleCorner = Instance.new("UICorner")
ToggleCorner.CornerRadius = UDim.new(1, 0)
ToggleCorner.Parent = _G.ToggleBtn

local ToggleStroke = Instance.new("UIStroke")
ToggleStroke.Color = CONFIG.Colors.Primary
ToggleStroke.Thickness = 3
ToggleStroke.Parent = _G.ToggleBtn

-- Eventos
CloseBtn.MouseButton1Click:Connect(function()
    MainFrame.Visible = false
    _G.ToggleBtn.Visible = true
end)

MinBtn.MouseButton1Click:Connect(function()
    MainFrame.Visible = false
    _G.ToggleBtn.Visible = true
end)

_G.ToggleBtn.MouseButton1Click:Connect(function()
    MainFrame.Visible = true
    _G.ToggleBtn.Visible = false
end)

--// FPS COUNTER
spawn(function()
    while wait(0.5) do
        local fps = math.floor(1 / RunService.RenderStepped:Wait())
        if _G.FPSLabel then _G.FPSLabel.Text = "FPS: " .. fps end
        
        local ping = game:GetService("Stats").Network.ServerStatsItem["Data Ping"]:GetValue()
        if _G.PingLabel then _G.PingLabel.Text = "Ping: " .. math.floor(ping) .. "ms" end
    end
end)

--// PROTEÃ‡ÃƒO
local OldNamecall
OldNamecall = hookmetamethod(game, "__namecall", function(self, ...)
    local Method = getnamecallmethod()
    if Method == "Kick" then
        CreateNotification("Protection", "Kick blocked!", 3)
        return nil
    end
    if Method == "FireServer" then
        local RemoteName = self.Name
        if RemoteName:match("Ban") or RemoteName:match("Punish") then
            CreateNotification("Protection", "Ban remote blocked!", 3)
            return nil
        end
    end
    return OldNamecall(self, ...)
end)

print("â˜… The StarEzic Hub - Parte 1 Carregada!")
--[[
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘           â˜… The StarEzic Hub â˜… - Parte 2                      â•‘
    â•‘           Flee The Facility - Funcionalidades                 â•‘
    â•‘           BotÃµes, Abas e Features                             â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]]

--// STATES
local States = {
    NeverFail = false,
    AlwaysFail = false,
    ESP = false,
    ComputerESP = false,
    PodESP = false,
    BeastESP = false,
    NoFog = false,
    Fullbright = false,
    Speed = false,
    Fly = false,
    Noclip = false,
    GodMode = false,
    AutoFarm = false,
    InstantHack = false,
    AntiAFK = false,
    AutoRescue = false,
    AutoLoot = false
}

--// VARIÃVEIS
local SpeedValue = 50
local ESPObjects = {}
local PCPositions = {}
local FlyBodyGyro, FlyBodyVelocity
local CurrentRank = "NONE"

--// CONFIG
local CONFIG = {
    Colors = {
        Primary = Color3.fromRGB(0, 255, 136),
        Secondary = Color3.fromRGB(0, 170, 255),
        Premium = Color3.fromRGB(255, 0, 255),
        Dev = Color3.fromRGB(255, 215, 0),
        Background = Color3.fromRGB(15, 15, 26),
        Glass = Color3.fromRGB(20, 20, 35)
    }
}

--// FUNÃ‡ÃƒO CRIAR TOGGLE
local function CreateToggle(parent, name, posY, callback)
    local Toggle = Instance.new("Frame")
    Toggle.Parent = parent
    Toggle.BackgroundColor3 = CONFIG.Colors.Glass
    Toggle.BorderSizePixel = 0
    Toggle.Position = UDim2.new(0, 10, 0, posY)
    Toggle.Size = UDim2.new(1, -20, 0, 40)
    
    local Corner = Instance.new("UICorner")
    Corner.CornerRadius = UDim.new(0, 8)
    Corner.Parent = Toggle
    
    local Label = Instance.new("TextLabel")
    Label.Parent = Toggle
    Label.BackgroundTransparency = 1
    Label.Position = UDim2.new(0, 15, 0, 0)
    Label.Size = UDim2.new(0.6, 0, 1, 0)
    Label.Font = Enum.Font.Gotham
    Label.Text = name
    Label.TextColor3 = Color3.fromRGB(255, 255, 255)
    Label.TextSize = 13
    Label.TextXAlignment = Enum.TextXAlignment.Left
    
    local Switch = Instance.new("Frame")
    Switch.Parent = Toggle
    Switch.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
    Switch.BorderSizePixel = 0
    Switch.Position = UDim2.new(1, -55, 0.5, -12)
    Switch.Size = UDim2.new(0, 45, 0, 24)
    
    local SwitchCorner = Instance.new("UICorner")
    SwitchCorner.CornerRadius = UDim.new(1, 0)
    SwitchCorner.Parent = Switch
    
    local Circle = Instance.new("Frame")
    Circle.Parent = Switch
    Circle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    Circle.BorderSizePixel = 0
    Circle.Position = UDim2.new(0, 2, 0.5, -10)
    Circle.Size = UDim2.new(0, 20, 0, 20)
    
    local CircleCorner = Instance.new("UICorner")
    CircleCorner.CornerRadius = UDim.new(1, 0)
    CircleCorner.Parent = Circle
    
    local Click = Instance.new("TextButton")
    Click.Parent = Toggle
    Click.BackgroundTransparency = 1
    Click.Size = UDim2.new(1, 0, 1, 0)
    Click.Text = ""
    
    local enabled = false
    local function Update()
        if enabled then
            Switch.BackgroundColor3 = CONFIG.Colors.Primary
            Circle:TweenPosition(UDim2.new(0, 23, 0.5, -10), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, 0.2, true)
            Label.TextColor3 = CONFIG.Colors.Primary
        else
            Switch.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
            Circle:TweenPosition(UDim2.new(0, 2, 0.5, -10), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, 0.2, true)
            Label.TextColor3 = Color3.fromRGB(255, 255, 255)
        end
    end
    
    Click.MouseButton1Click:Connect(function()
        enabled = not enabled
        Update()
        if callback then callback(enabled) end
    end)
    
    return Toggle, function(state) enabled = state Update() end
end

--// FUNÃ‡ÃƒO CRIAR BOTÃƒO
local function CreateButton(parent, name, posY, color, callback)
    local Button = Instance.new("TextButton")
    Button.Parent = parent
    Button.BackgroundColor3 = color or CONFIG.Colors.Glass
    Button.BorderSizePixel = 0
    Button.Position = UDim2.new(0, 10, 0, posY)
    Button.Size = UDim2.new(1, -20, 0, 40)
    Button.Font = Enum.Font.GothamBold
    Button.Text = name
    Button.TextColor3 = Color3.fromRGB(255, 255, 255)
    Button.TextSize = 13
    
    local Corner = Instance.new("UICorner")
    Corner.CornerRadius = UDim.new(0, 8)
    Corner.Parent = Button
    
    Button.MouseEnter:Connect(function()
        Button:TweenSize(UDim2.new(1, -16, 0, 42), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, 0.2, true)
    end)
    
    Button.MouseLeave:Connect(function()
        Button:TweenSize(UDim2.new(1, -20, 0, 40), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, 0.2, true)
    end)
    
    Button.MouseButton1Click:Connect(function()
        if callback then callback() end
    end)
    
    return Button
end

--// CRIAR PÃGINAS
local Pages = {}

local function CreatePage(name)
    local Page = Instance.new("ScrollingFrame")
    Page.Name = name .. "Page"
    Page.Parent = _G.ContentArea
    Page.BackgroundTransparency = 1
    Page.BorderSizePixel = 0
    Page.Size = UDim2.new(1, 0, 1, 0)
    Page.ScrollBarThickness = 4
    Page.ScrollBarImageColor3 = CONFIG.Colors.Primary
    Page.Visible = false
    
    local Layout = Instance.new("UIListLayout")
    Layout.Parent = Page
    Layout.SortOrder = Enum.SortOrder.LayoutOrder
    Layout.Padding = UDim.new(0, 8)
    
    local Padding = Instance.new("UIPadding")
    Padding.Parent = Page
    Padding.PaddingTop = UDim.new(0, 10)
    Padding.PaddingBottom = UDim.new(0, 10)
    
    Pages[name] = Page
    return Page
end

--// CRIAR ABAS
local function CreateTab(name, icon, pageName, color)
    local Tab = Instance.new("TextButton")
    Tab.Parent = _G.ContentArea.Parent:FindFirstChild("Sidebar")
    Tab.BackgroundColor3 = CONFIG.Colors.Glass
    Tab.BorderSizePixel = 0
    Tab.Position = UDim2.new(0, 10, 0, (#Pages * 50) + 10)
    Tab.Size = UDim2.new(1, -20, 0, 40)
    Tab.Font = Enum.Font.GothamBold
    Tab.Text = "  " .. name
    Tab.TextColor3 = Color3.fromRGB(200, 200, 220)
    Tab.TextSize = 12
    Tab.TextXAlignment = Enum.TextXAlignment.Left
    
    local Corner = Instance.new("UICorner")
    Corner.CornerRadius = UDim.new(0, 8)
    Corner.Parent = Tab
    
    Tab.MouseButton1Click:Connect(function()
        for _, p in pairs(Pages) do p.Visible = false end
        for _, t in pairs(Tab.Parent:GetChildren()) do
            if t:IsA("TextButton") then
                t.BackgroundColor3 = CONFIG.Colors.Glass
                t.TextColor3 = Color3.fromRGB(200, 200, 220)
            end
        end
        Pages[pageName].Visible = true
        Tab.BackgroundColor3 = color
        Tab.TextColor3 = Color3.fromRGB(255, 255, 255)
    end)
    
    return Tab
end

--// PÃGINA PRINCIPAL
local MainPage = CreatePage("Main")

-- TÃ­tulo
local MainTitle = Instance.new("TextLabel")
MainTitle.Parent = MainPage
MainTitle.BackgroundTransparency = 1
MainTitle.Size = UDim2.new(1, -20, 0, 30)
MainTitle.Font = Enum.Font.GothamBold
MainTitle.Text = "âš¡ FUNÃ‡Ã•ES PRINCIPAIS"
MainTitle.TextColor3 = CONFIG.Colors.Primary
MainTitle.TextSize = 16

-- Toggles Main
CreateToggle(MainPage, "Never Fail Hack", 40, function(state)
    States.NeverFail = state
    if state then
        spawn(function()
            while States.NeverFail do
                pcall(function()
                    game.ReplicatedStorage.RemoteEvent:FireServer("SetPlayerMinigameResult", true)
                end)
                wait(0.1)
            end
        end)
    end
end)

CreateToggle(MainPage, "Always Fail (Troll)", 88, function(state)
    States.AlwaysFail = state
    if state then
        spawn(function()
            while States.AlwaysFail do
                pcall(function()
                    game.ReplicatedStorage.RemoteEvent:FireServer("SetPlayerMinigameResult", false)
                end)
                wait(0.1)
            end
        end)
    end
end)

CreateToggle(MainPage, "Super Speed", 136, function(state)
    States.Speed = state
    local char = game.Players.LocalPlayer.Character
    if char and char:FindFirstChild("Humanoid") then
        char.Humanoid.WalkSpeed = state and SpeedValue or 16
    end
end)

CreateToggle(MainPage, "God Mode", 184, function(state)
    States.GodMode = state
end)

CreateToggle(MainPage, "Fly Mode", 232, function(state)
    States.Fly = state
    local char = game.Players.LocalPlayer.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") then return end
    
    if state then
        FlyBodyGyro = Instance.new("BodyGyro")
        FlyBodyGyro.Parent = char.HumanoidRootPart
        FlyBodyGyro.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
        FlyBodyGyro.CFrame = char.HumanoidRootPart.CFrame
        
        FlyBodyVelocity = Instance.new("BodyVelocity")
        FlyBodyVelocity.Parent = char.HumanoidRootPart
        FlyBodyVelocity.MaxForce = Vector3.new(9e9, 9e9, 9e9)
        FlyBodyVelocity.Velocity = Vector3.new(0, 0, 0)
        
        spawn(function()
            while States.Fly and FlyBodyGyro and FlyBodyVelocity do
                local cam = workspace.CurrentCamera
                local dir = Vector3.new(0, 0, 0)
                
                if UserInputService:IsKeyDown(Enum.KeyCode.W) then dir = dir + cam.CFrame.LookVector end
                if UserInputService:IsKeyDown(Enum.KeyCode.S) then dir = dir - cam.CFrame.LookVector end
                if UserInputService:IsKeyDown(Enum.KeyCode.A) then dir = dir - cam.CFrame.RightVector end
                if UserInputService:IsKeyDown(Enum.KeyCode.D) then dir = dir + cam.CFrame.RightVector end
                if UserInputService:IsKeyDown(Enum.KeyCode.Space) then dir = dir + Vector3.new(0, 1, 0) end
                if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then dir = dir - Vector3.new(0, 1, 0) end
                
                FlyBodyVelocity.Velocity = dir * 50
                FlyBodyGyro.CFrame = cam.CFrame
                RunService.RenderStepped:Wait()
            end
        end)
    else
        if FlyBodyGyro then FlyBodyGyro:Destroy() end
        if FlyBodyVelocity then FlyBodyVelocity:Destroy() end
    end
end)

CreateToggle(MainPage, "Noclip", 280, function(state)
    States.Noclip = state
end)

--// PÃGINA VISUAL
local VisualPage = CreatePage("Visual")

local VisualTitle = Instance.new("TextLabel")
VisualTitle.Parent = VisualPage
VisualTitle.BackgroundTransparency = 1
VisualTitle.Size = UDim2.new(1, -20, 0, 30)
VisualTitle.Font = Enum.Font.GothamBold
VisualTitle.Text = "ğŸ‘ VISUAL ESP"
VisualTitle.TextColor3 = CONFIG.Colors.Secondary
VisualTitle.TextSize = 16

CreateToggle(VisualPage, "Player ESP", 40, function(state)
    States.ESP = state
    if state then
        -- ESP Implementation
        for _, player in pairs(game.Players:GetPlayers()) do
            if player ~= game.Players.LocalPlayer and player.Character then
                local esp = Instance.new("BillboardGui")
                esp.Name = "StarEzicESP"
                esp.Parent = player.Character:WaitForChild("Head")
                esp.AlwaysOnTop = true
                esp.Size = UDim2.new(0, 200, 0, 50)
                esp.StudsOffset = Vector3.new(0, 2, 0)
                
                local frame = Instance.new("Frame")
                frame.Parent = esp
                frame.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
                frame.BackgroundTransparency = 0.5
                frame.Size = UDim2.new(1, 0, 1, 0)
                
                local name = Instance.new("TextLabel")
                name.Parent = frame
                name.BackgroundTransparency = 1
                name.Size = UDim2.new(1, 0, 1, 0)
                name.Font = Enum.Font.GothamBold
                name.Text = player.Name
                name.TextColor3 = Color3.fromRGB(255, 255, 255)
                name.TextSize = 14
                
                table.insert(ESPObjects, esp)
            end
        end
    else
        for _, esp in pairs(ESPObjects) do
            if esp then esp:Destroy() end
        end
        ESPObjects = {}
    end
end)

CreateToggle(VisualPage, "Computer ESP", 88, function(state)
    States.ComputerESP = state
end)

CreateToggle(VisualPage, "Pod ESP", 136, function(state)
    States.PodESP = state
end)

CreateToggle(VisualPage, "Beast ESP", 184, function(state)
    States.BeastESP = state
end)

CreateToggle(VisualPage, "No Fog", 232, function(state)
    States.NoFog = state
    if state then
        game.Lighting.FogStart = 100000
        game.Lighting.FogEnd = 100000
        game.Lighting.Brightness = 5
    else
        game.Lighting.FogStart = 100
        game.Lighting.FogEnd = 1000
        game.Lighting.Brightness = 1
    end
end)

CreateToggle(VisualPage, "Fullbright", 280, function(state)
    States.Fullbright = state
    if state then
        game.Lighting.Brightness = 10
        game.Lighting.GlobalShadows = false
        game.Lighting.Ambient = Color3.fromRGB(255, 255, 255)
    else
        game.Lighting.Brightness = 1
        game.Lighting.GlobalShadows = true
        game.Lighting.Ambient = Color3.fromRGB(127, 127, 127)
    end
end)

--// PÃGINA TELEPORT
local TeleportPage = CreatePage("Teleport")

local TeleportTitle = Instance.new("TextLabel")
TeleportTitle.Parent = TeleportPage
TeleportTitle.BackgroundTransparency = 1
TeleportTitle.Size = UDim2.new(1, -20, 0, 30)
TeleportTitle.Font = Enum.Font.GothamBold
TeleportTitle.Text = "ğŸŒ TELEPORTE"
TeleportTitle.TextColor3 = Color3.fromRGB(255, 100, 100)
TeleportTitle.TextSize = 16

CreateButton(TeleportPage, "Teleportar para Computadores", 40, Color3.fromRGB(80, 120, 255), function()
    PCPositions = {}
    for _, v in pairs(workspace:GetDescendants()) do
        if v.Name == "ComputerTable" and v:FindFirstChild("ComputerTrigger1") then
            table.insert(PCPositions, v.ComputerTrigger1.CFrame)
        end
    end
    CreateNotification("Computadores", #PCPositions .. " PCs encontrados!", 2)
end)

for i = 1, 7 do
    CreateButton(TeleportPage, "PC #" .. i, 88 + ((i-1) * 48), Color3.fromRGB(60, 80, 200), function()
        if PCPositions[i] then
            local hrp = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            if hrp then hrp.CFrame = PCPositions[i] + Vector3.new(0, 3, 0) end
        end
    end)
end

CreateButton(TeleportPage, "Teleportar para SaÃ­da", 424, Color3.fromRGB(255, 100, 100), function()
    for _, v in pairs(workspace:GetDescendants()) do
        if v.Name:match("Exit") and v:IsA("BasePart") then
            local hrp = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            if hrp then hrp.CFrame = v.CFrame + Vector3.new(0, 5, 0) end
            break
        end
    end
end)

CreateButton(TeleportPage, "Teleportar para Pods", 472, Color3.fromRGB(100, 255, 100), function()
    for _, v in pairs(workspace:GetDescendants()) do
        if v.Name:match("Pod") and v:IsA("BasePart") then
            local hrp = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            if hrp then hrp.CFrame = v.CFrame + Vector3.new(0, 5, 0) end
            break
        end
    end
end)

--// PÃGINA PREMIUM
local PremiumPage = CreatePage("Premium")

local PremiumTitle = Instance.new("TextLabel")
PremiumTitle.Parent = PremiumPage
PremiumTitle.BackgroundTransparency = 1
PremiumTitle.Size = UDim2.new(1, -20, 0, 30)
PremiumTitle.Font = Enum.Font.GothamBold
PremiumTitle.Text = "â­ FUNÃ‡Ã•ES PREMIUM"
PremiumTitle.TextColor3 = CONFIG.Colors.Premium
PremiumTitle.TextSize = 16

CreateToggle(PremiumPage, "Auto Farm Completo", 40, function(state)
    States.AutoFarm = state
end)

CreateToggle(PremiumPage, "Auto Rescue Amigos", 88, function(state)
    States.AutoRescue = state
end)

CreateToggle(PremiumPage, "Auto Loot", 136, function(state)
    States.AutoLoot = state
end)

CreateToggle(PremiumPage, "Invisibilidade", 184, function(state)
    -- Premium feature
end)

CreateToggle(PremiumPage, "Speed Hack 100x", 232, function(state)
    -- Premium feature
end)

CreateToggle(PremiumPage, "Anti-Ban Ultra", 280, function(state)
    -- Premium feature
end)

--// PÃGINA DEV (Apenas Developer)
local DevPage = CreatePage("Dev")

local DevTitle = Instance.new("TextLabel")
DevTitle.Parent = DevPage
DevTitle.BackgroundTransparency = 1
DevTitle.Size = UDim2.new(1, -20, 0, 30)
DevTitle.Font = Enum.Font.GothamBold
DevTitle.Text = "ğŸ”’ DEV PANEL"
DevTitle.TextColor3 = CONFIG.Colors.Dev
DevTitle.TextSize = 16

CreateButton(DevPage, "Gerar Key Premium", 40, CONFIG.Colors.Premium, function()
    if CurrentRank == "DEVELOPER" then
        local key = GenerateKey("premium", 7)
        CreateNotification("Key Gerada!", key, 10)
        print("KEY PREMIUM: " .. key)
    end
end)

CreateButton(DevPage, "Gerar Key Basic", 88, CONFIG.Colors.Secondary, function()
    if CurrentRank == "DEVELOPER" then
        local key = GenerateKey("basic", 30)
        CreateNotification("Key Gerada!", key, 10)
        print("KEY BASIC: " .. key)
    end
end)

CreateButton(DevPage, "Ver Keys Ativas", 136, CONFIG.Colors.Primary, function()
    if CurrentRank == "DEVELOPER" then
        print("=== KEYS ATIVAS ===")
        for key, data in pairs(_G.KeySystem.ActiveKeys) do
            if not data.used then
                local timeLeft = math.floor((data.expiration - tick()) / 86400)
                print(key .. " | " .. data.type .. " | " .. timeLeft .. " dias")
            end
        end
    end
end)

--// CRIAR ABAS VISUAIS
CreateTab("Principal", "", "Main", CONFIG.Colors.Primary)
CreateTab("Visual", "", "Visual", CONFIG.Colors.Secondary)
CreateTab("Teleport", "", "Teleport", Color3.fromRGB(255, 100, 100))

-- Mostrar primeira pÃ¡gina
Pages.Main.Visible = true

--// SISTEMA DE RANK
local function SetupRank()
    CurrentRank = GetUserRank()
    
    if CurrentRank == "DEVELOPER" then
        _G.RankLabel.Text = "ğŸ‘‘ DEVELOPER"
        _G.RankLabel.TextColor3 = CONFIG.Colors.Dev
        CreateTab("Dev", "", "Dev", CONFIG.Colors.Dev)
        CreateTab("Premium", "", "Premium", CONFIG.Colors.Premium)
        
        -- Comandos chat
        game.Players.LocalPlayer.Chatted:Connect(function(msg)
            local args = msg:split(" ")
            local cmd = args[1]:lower()
            
            if cmd == "!genkey" then
                local keyType = args[2] or "basic"
                local days = tonumber((args[3] or "7"):gsub("d", "")) or 7
                if keyType == "lifetime" then days = 999999 end
                local key = GenerateKey(keyType, days)
                CreateNotification("Key Gerada!", key .. " (" .. keyType .. ")", 10)
            elseif cmd == "!ban" then
                local target = args[2]
                if target then
                    table.insert(_G.KeySystem.BannedUsers, target)
                    CreateNotification("Banido!", target .. " banido do script!", 3)
                end
            end
        end)
        
    elseif CurrentRank == "PREMIUM" then
        _G.RankLabel.Text = "â­ PREMIUM"
        _G.RankLabel.TextColor3 = CONFIG.Colors.Premium
        CreateTab("Premium", "", "Premium", CONFIG.Colors.Premium)
        
    else
        _G.RankLabel.Text = "ğŸ”· BASIC"
        _G.RankLabel.TextColor3 = CONFIG.Colors.Secondary
    end
end

--// LOGIN SYSTEM
local function ShowLogin()
    local LoginFrame = Instance.new("Frame")
    LoginFrame.Parent = _G.ContentArea.Parent.Parent
    LoginFrame.BackgroundColor3 = CONFIG.Colors.Background
    LoginFrame.BackgroundTransparency = 0.1
    LoginFrame.BorderSizePixel = 0
    LoginFrame.Position = UDim2.new(0.5, -200, 0.5, -150)
    LoginFrame.Size = UDim2.new(0, 400, 0, 300)
    LoginFrame.ZIndex = 100
    
    local Corner = Instance.new("UICorner")
    Corner.CornerRadius = UDim.new(0, 16)
    Corner.Parent = LoginFrame
    
    local Stroke = Instance.new("UIStroke")
    Stroke.Color = CONFIG.Colors.Primary
        Stroke.Thickness = 3
    Stroke.Parent = LoginFrame
    
    local Title = Instance.new("TextLabel")
    Title.Parent = LoginFrame
    Title.BackgroundTransparency = 1
    Title.Position = UDim2.new(0, 0, 0, 20)
    Title.Size = UDim2.new(1, 0, 0, 40)
    Title.Font = Enum.Font.GothamBold
    Title.Text = "â˜… The StarEzic Hub â˜…"
    Title.TextColor3 = CONFIG.Colors.Primary
    Title.TextSize = 28
    
    local KeyBox = Instance.new("TextBox")
    KeyBox.Parent = LoginFrame
    KeyBox.BackgroundColor3 = CONFIG.Colors.Glass
    KeyBox.BorderSizePixel = 0
    KeyBox.Position = UDim2.new(0.5, -150, 0, 100)
    KeyBox.Size = UDim2.new(0, 300, 0, 45)
    KeyBox.Font = Enum.Font.Gotham
    KeyBox.PlaceholderText = "Enter Your Key Here..."
    KeyBox.Text = ""
    KeyBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    KeyBox.TextSize = 16
    
    local KeyCorner = Instance.new("UICorner")
    KeyCorner.CornerRadius = UDim.new(0, 10)
    KeyCorner.Parent = KeyBox
    
    local VerifyBtn = Instance.new("TextButton")
    VerifyBtn.Parent = LoginFrame
    VerifyBtn.BackgroundColor3 = CONFIG.Colors.Primary
    VerifyBtn.BorderSizePixel = 0
    VerifyBtn.Position = UDim2.new(0.5, -100, 0, 160)
    VerifyBtn.Size = UDim2.new(0, 200, 0, 45)
    VerifyBtn.Font = Enum.Font.GothamBold
    VerifyBtn.Text = "VERIFY KEY"
    VerifyBtn.TextColor3 = Color3.fromRGB(0, 0, 0)
    VerifyBtn.TextSize = 16
    
    local VerifyCorner = Instance.new("UICorner")
    VerifyCorner.CornerRadius = UDim.new(0, 10)
    VerifyCorner.Parent = VerifyBtn
    
    local TrialBtn = Instance.new("TextButton")
    TrialBtn.Parent = LoginFrame
    TrialBtn.BackgroundColor3 = CONFIG.Colors.Secondary
    TrialBtn.BackgroundTransparency = 0.8
    TrialBtn.BorderSizePixel = 0
    TrialBtn.Position = UDim2.new(0.5, -75, 0, 220)
    TrialBtn.Size = UDim2.new(0, 150, 0, 35)
    TrialBtn.Font = Enum.Font.GothamBold
    TrialBtn.Text = "FREE TRIAL (1h)"
    TrialBtn.TextColor3 = CONFIG.Colors.Secondary
    TrialBtn.TextSize = 12
    
    local TrialCorner = Instance.new("UICorner")
    TrialCorner.CornerRadius = UDim.new(0, 8)
    TrialCorner.Parent = TrialBtn
    
    VerifyBtn.MouseButton1Click:Connect(function()
        local key = KeyBox.Text:upper()
        if _G.KeySystem.ActiveKeys[key] and not _G.KeySystem.ActiveKeys[key].used then
            local data = _G.KeySystem.ActiveKeys[key]
            data.used = true
            data.usedBy = game.Players.LocalPlayer.Name
            _G.KeySystem.UserAccess[game.Players.LocalPlayer.Name] = {
                rank = data.type:upper(),
                expiration = data.expiration
            }
            LoginFrame:Destroy()
            SetupRank()
            _G.MainFrame.Visible = true
            CreateNotification("Success!", "Access granted: " .. data.type:upper(), 3)
        else
            CreateNotification("Error!", "Invalid or used key!", 3)
        end
    end)
    
    TrialBtn.MouseButton1Click:Connect(function()
        _G.KeySystem.UserAccess[game.Players.LocalPlayer.Name] = {
            rank = "BASIC",
            expiration = tick() + 3600
        }
        LoginFrame:Destroy()
        SetupRank()
        _G.MainFrame.Visible = true
        CreateNotification("Trial Started!", "1 hour free access", 3)
    end)
end

--// INICIALIZAR
if CurrentRank == "DEVELOPER" then
    _G.MainFrame.Visible = true
    SetupRank()
    CreateNotification("Welcome Developer!", "All commands enabled", 5)
else
    ShowLogin()
end

--// NOCLIP LOOP
game:GetService("RunService").Stepped:Connect(function()
    if States.Noclip and game.Players.LocalPlayer.Character then
        for _, part in pairs(game.Players.LocalPlayer.Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
            end
        end
    end
end)

print("â˜… The StarEzic Hub - Parte 2 Carregada!")
print("â˜… Todas as funcionalidades ativas!")
